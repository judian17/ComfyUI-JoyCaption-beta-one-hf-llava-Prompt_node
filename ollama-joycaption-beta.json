{"id":"dca2fa1d-a2c8-4235-ae8f-982ff872f748","revision":0,"last_node_id":32,"last_link_id":31,"nodes":[{"id":14,"type":"OllamaConnectivityV2","pos":[-357.74713134765625,-1484.10498046875],"size":[270,130],"flags":{},"order":0,"mode":0,"inputs":[{"localized_name":"url","name":"url","type":"STRING","widget":{"name":"url"},"link":null},{"localized_name":"model","name":"model","type":"COMBO","widget":{"name":"model"},"link":null},{"localized_name":"keep_alive","name":"keep_alive","type":"INT","widget":{"name":"keep_alive"},"link":null},{"localized_name":"keep_alive_unit","name":"keep_alive_unit","type":"COMBO","widget":{"name":"keep_alive_unit"},"link":null}],"outputs":[{"localized_name":"connection","name":"connection","type":"OLLAMA_CONNECTIVITY","links":[7]}],"properties":{"cnr_id":"comfyui-ollama","ver":"1f5b5bf54551bc9f0b1a4d2915ad496f6dfd8c36","Node name for S&R":"OllamaConnectivityV2"},"widgets_values":["http://127.0.0.1:11434","aha2025/llama-joycaption-beta-one-hf-llava:Q6_K",5,"minutes"]},{"id":2,"type":"LoadImage","pos":[-354.8225402832031,-1300.0745849609375],"size":[270,314],"flags":{},"order":1,"mode":0,"inputs":[{"localized_name":"图像","name":"image","type":"COMBO","widget":{"name":"image"},"link":null},{"localized_name":"选择文件上传","name":"upload","type":"IMAGEUPLOAD","widget":{"name":"upload"},"link":null}],"outputs":[{"localized_name":"图像","name":"IMAGE","type":"IMAGE","links":[6]},{"localized_name":"遮罩","name":"MASK","type":"MASK","links":null}],"properties":{"cnr_id":"comfy-core","ver":"0.3.45","Node name for S&R":"LoadImage"},"widgets_values":["ComfyUI_temp_rxnex_00011_.png [temp]","image"]},{"id":15,"type":"OllamaOptionsV2","pos":[-67.88312530517578,-1408.0955810546875],"size":[286.103515625,754],"flags":{},"order":2,"mode":0,"inputs":[{"localized_name":"enable_mirostat","name":"enable_mirostat","type":"BOOLEAN","widget":{"name":"enable_mirostat"},"link":null},{"localized_name":"mirostat","name":"mirostat","type":"INT","widget":{"name":"mirostat"},"link":null},{"localized_name":"enable_mirostat_eta","name":"enable_mirostat_eta","type":"BOOLEAN","widget":{"name":"enable_mirostat_eta"},"link":null},{"localized_name":"mirostat_eta","name":"mirostat_eta","type":"FLOAT","widget":{"name":"mirostat_eta"},"link":null},{"localized_name":"enable_mirostat_tau","name":"enable_mirostat_tau","type":"BOOLEAN","widget":{"name":"enable_mirostat_tau"},"link":null},{"localized_name":"mirostat_tau","name":"mirostat_tau","type":"FLOAT","widget":{"name":"mirostat_tau"},"link":null},{"localized_name":"enable_num_ctx","name":"enable_num_ctx","type":"BOOLEAN","widget":{"name":"enable_num_ctx"},"link":null},{"localized_name":"num_ctx","name":"num_ctx","type":"INT","widget":{"name":"num_ctx"},"link":null},{"localized_name":"enable_repeat_last_n","name":"enable_repeat_last_n","type":"BOOLEAN","widget":{"name":"enable_repeat_last_n"},"link":null},{"localized_name":"repeat_last_n","name":"repeat_last_n","type":"INT","widget":{"name":"repeat_last_n"},"link":null},{"localized_name":"enable_repeat_penalty","name":"enable_repeat_penalty","type":"BOOLEAN","widget":{"name":"enable_repeat_penalty"},"link":null},{"localized_name":"repeat_penalty","name":"repeat_penalty","type":"FLOAT","widget":{"name":"repeat_penalty"},"link":null},{"localized_name":"enable_temperature","name":"enable_temperature","type":"BOOLEAN","widget":{"name":"enable_temperature"},"link":null},{"localized_name":"temperature","name":"temperature","type":"FLOAT","widget":{"name":"temperature"},"link":null},{"localized_name":"enable_seed","name":"enable_seed","type":"BOOLEAN","widget":{"name":"enable_seed"},"link":null},{"localized_name":"seed","name":"seed","type":"INT","widget":{"name":"seed"},"link":null},{"localized_name":"enable_stop","name":"enable_stop","type":"BOOLEAN","widget":{"name":"enable_stop"},"link":null},{"localized_name":"stop","name":"stop","type":"STRING","widget":{"name":"stop"},"link":null},{"localized_name":"enable_tfs_z","name":"enable_tfs_z","type":"BOOLEAN","widget":{"name":"enable_tfs_z"},"link":null},{"localized_name":"tfs_z","name":"tfs_z","type":"FLOAT","widget":{"name":"tfs_z"},"link":null},{"localized_name":"enable_num_predict","name":"enable_num_predict","type":"BOOLEAN","widget":{"name":"enable_num_predict"},"link":null},{"localized_name":"num_predict","name":"num_predict","type":"INT","widget":{"name":"num_predict"},"link":null},{"localized_name":"enable_top_k","name":"enable_top_k","type":"BOOLEAN","widget":{"name":"enable_top_k"},"link":null},{"localized_name":"top_k","name":"top_k","type":"INT","widget":{"name":"top_k"},"link":null},{"localized_name":"enable_top_p","name":"enable_top_p","type":"BOOLEAN","widget":{"name":"enable_top_p"},"link":null},{"localized_name":"top_p","name":"top_p","type":"FLOAT","widget":{"name":"top_p"},"link":null},{"localized_name":"enable_min_p","name":"enable_min_p","type":"BOOLEAN","widget":{"name":"enable_min_p"},"link":null},{"localized_name":"min_p","name":"min_p","type":"FLOAT","widget":{"name":"min_p"},"link":null},{"localized_name":"debug","name":"debug","type":"BOOLEAN","widget":{"name":"debug"},"link":null}],"outputs":[{"localized_name":"options","name":"options","type":"OLLAMA_OPTIONS","links":[25]}],"properties":{"cnr_id":"comfyui-ollama","ver":"1f5b5bf54551bc9f0b1a4d2915ad496f6dfd8c36","Node name for S&R":"OllamaOptionsV2"},"widgets_values":[false,0,false,0.1,false,5,true,2048,false,64,false,1.1,false,0.8,false,592035443,"randomize",false,"",false,1,false,-1,false,40,false,0.9,false,0,false]},{"id":17,"type":"JoyCaptionOllamaExtraOptions","pos":[231.6997833251953,-1365.984375],"size":[382.783203125,706],"flags":{},"order":3,"mode":0,"inputs":[{"localized_name":"refer_character_name","name":"refer_character_name","type":"BOOLEAN","widget":{"name":"refer_character_name"},"link":null},{"localized_name":"exclude_people_info","name":"exclude_people_info","type":"BOOLEAN","widget":{"name":"exclude_people_info"},"link":null},{"localized_name":"include_lighting","name":"include_lighting","type":"BOOLEAN","widget":{"name":"include_lighting"},"link":null},{"localized_name":"include_camera_angle","name":"include_camera_angle","type":"BOOLEAN","widget":{"name":"include_camera_angle"},"link":null},{"localized_name":"include_watermark_info","name":"include_watermark_info","type":"BOOLEAN","widget":{"name":"include_watermark_info"},"link":null},{"localized_name":"include_JPEG_artifacts","name":"include_JPEG_artifacts","type":"BOOLEAN","widget":{"name":"include_JPEG_artifacts"},"link":null},{"localized_name":"include_exif","name":"include_exif","type":"BOOLEAN","widget":{"name":"include_exif"},"link":null},{"localized_name":"exclude_sexual","name":"exclude_sexual","type":"BOOLEAN","widget":{"name":"exclude_sexual"},"link":null},{"localized_name":"exclude_image_resolution","name":"exclude_image_resolution","type":"BOOLEAN","widget":{"name":"exclude_image_resolution"},"link":null},{"localized_name":"include_aesthetic_quality","name":"include_aesthetic_quality","type":"BOOLEAN","widget":{"name":"include_aesthetic_quality"},"link":null},{"localized_name":"include_composition_style","name":"include_composition_style","type":"BOOLEAN","widget":{"name":"include_composition_style"},"link":null},{"localized_name":"exclude_text","name":"exclude_text","type":"BOOLEAN","widget":{"name":"exclude_text"},"link":null},{"localized_name":"specify_depth_field","name":"specify_depth_field","type":"BOOLEAN","widget":{"name":"specify_depth_field"},"link":null},{"localized_name":"specify_lighting_sources","name":"specify_lighting_sources","type":"BOOLEAN","widget":{"name":"specify_lighting_sources"},"link":null},{"localized_name":"do_not_use_ambiguous_language","name":"do_not_use_ambiguous_language","type":"BOOLEAN","widget":{"name":"do_not_use_ambiguous_language"},"link":null},{"localized_name":"include_nsfw_rating","name":"include_nsfw_rating","type":"BOOLEAN","widget":{"name":"include_nsfw_rating"},"link":null},{"localized_name":"only_describe_most_important_elements","name":"only_describe_most_important_elements","type":"BOOLEAN","widget":{"name":"only_describe_most_important_elements"},"link":null},{"localized_name":"do_not_include_artist_name_or_title","name":"do_not_include_artist_name_or_title","type":"BOOLEAN","widget":{"name":"do_not_include_artist_name_or_title"},"link":null},{"localized_name":"identify_image_orientation","name":"identify_image_orientation","type":"BOOLEAN","widget":{"name":"identify_image_orientation"},"link":null},{"localized_name":"use_vulgar_slang_and_profanity","name":"use_vulgar_slang_and_profanity","type":"BOOLEAN","widget":{"name":"use_vulgar_slang_and_profanity"},"link":null},{"localized_name":"do_not_use_polite_euphemisms","name":"do_not_use_polite_euphemisms","type":"BOOLEAN","widget":{"name":"do_not_use_polite_euphemisms"},"link":null},{"localized_name":"include_character_age","name":"include_character_age","type":"BOOLEAN","widget":{"name":"include_character_age"},"link":null},{"localized_name":"include_camera_shot_type","name":"include_camera_shot_type","type":"BOOLEAN","widget":{"name":"include_camera_shot_type"},"link":null},{"localized_name":"exclude_mood_feeling","name":"exclude_mood_feeling","type":"BOOLEAN","widget":{"name":"exclude_mood_feeling"},"link":null},{"localized_name":"include_camera_vantage_height","name":"include_camera_vantage_height","type":"BOOLEAN","widget":{"name":"include_camera_vantage_height"},"link":null},{"localized_name":"mention_watermark_explicitly","name":"mention_watermark_explicitly","type":"BOOLEAN","widget":{"name":"mention_watermark_explicitly"},"link":null},{"localized_name":"avoid_meta_descriptive_phrases","name":"avoid_meta_descriptive_phrases","type":"BOOLEAN","widget":{"name":"avoid_meta_descriptive_phrases"},"link":null},{"localized_name":"character_name","name":"character_name","type":"STRING","widget":{"name":"character_name"},"link":null}],"outputs":[{"localized_name":"extra_options_ollama","name":"extra_options_ollama","type":"JJC_OLLAMA_EXTRA_OPTION","links":[]}],"properties":{"Node name for S&R":"JoyCaptionOllamaExtraOptions"},"widgets_values":[false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,false,""]},{"id":11,"type":"OllamaGenerateV2","pos":[961.4815673828125,-1487.14794921875],"size":[400,304],"flags":{},"order":6,"mode":0,"inputs":[{"localized_name":"connectivity","name":"connectivity","shape":7,"type":"OLLAMA_CONNECTIVITY","link":7},{"localized_name":"options","name":"options","shape":7,"type":"OLLAMA_OPTIONS","link":25},{"localized_name":"images","name":"images","shape":7,"type":"IMAGE","link":6},{"localized_name":"context","name":"context","shape":7,"type":"OLLAMA_CONTEXT","link":null},{"localized_name":"meta","name":"meta","shape":7,"type":"OLLAMA_META","link":null},{"localized_name":"system","name":"system","type":"STRING","widget":{"name":"system"},"link":28},{"localized_name":"prompt","name":"prompt","type":"STRING","widget":{"name":"prompt"},"link":29},{"localized_name":"filter_thinking","name":"filter_thinking","type":"BOOLEAN","widget":{"name":"filter_thinking"},"link":null},{"localized_name":"keep_context","name":"keep_context","type":"BOOLEAN","widget":{"name":"keep_context"},"link":null},{"localized_name":"format","name":"format","type":"COMBO","widget":{"name":"format"},"link":null}],"outputs":[{"localized_name":"result","name":"result","type":"STRING","links":[27]},{"localized_name":"context","name":"context","type":"OLLAMA_CONTEXT","links":null},{"localized_name":"meta","name":"meta","type":"OLLAMA_META","links":null}],"properties":{"cnr_id":"comfyui-ollama","ver":"1f5b5bf54551bc9f0b1a4d2915ad496f6dfd8c36","Node name for S&R":"OllamaGenerateV2","aux_id":"stavsap/comfyui-ollama"},"widgets_values":["","",true,false,"text",[false,true],[false,true]]},{"id":30,"type":"ShowText|pysssss","pos":[1013.3720092773438,-1131.5928955078125],"size":[342.9447937011719,374.4043884277344],"flags":{},"order":8,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":27}],"outputs":[{"localized_name":"字符串","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","Node name for S&R":"ShowText|pysssss"},"widgets_values":[]},{"id":31,"type":"ShowText|pysssss","pos":[644.1013793945312,-1106.11865234375],"size":[333.11712646484375,106.60016632080078],"flags":{},"order":5,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":30}],"outputs":[{"localized_name":"字符串","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","Node name for S&R":"ShowText|pysssss"}},{"id":32,"type":"ShowText|pysssss","pos":[642.549560546875,-910.298095703125],"size":[333.11712646484375,106.60016632080078],"flags":{},"order":7,"mode":0,"inputs":[{"localized_name":"text","name":"text","type":"STRING","link":31}],"outputs":[{"localized_name":"字符串","name":"STRING","shape":6,"type":"STRING","links":null}],"properties":{"cnr_id":"comfyui-custom-scripts","ver":"aac13aa7ce35b07d43633c3bbe654a38c00d74f5","Node name for S&R":"ShowText|pysssss"}},{"id":16,"type":"JoyCaptionOllamaPrompter","pos":[630.1095581054688,-1286.3670654296875],"size":[291.767578125,102],"flags":{},"order":4,"mode":0,"inputs":[{"localized_name":"extra_options_input","name":"extra_options_input","shape":7,"type":"JJC_OLLAMA_EXTRA_OPTION","link":null},{"localized_name":"caption_type","name":"caption_type","type":"COMBO","widget":{"name":"caption_type"},"link":null},{"localized_name":"caption_length","name":"caption_length","type":"COMBO","widget":{"name":"caption_length"},"link":null}],"outputs":[{"localized_name":"system_prompt","name":"system_prompt","type":"STRING","links":[28,30]},{"localized_name":"user_prompt","name":"user_prompt","type":"STRING","links":[29,31]}],"properties":{"Node name for S&R":"JoyCaptionOllamaPrompter"},"widgets_values":["Booru-like tag list","long"]}],"links":[[6,2,0,11,2,"IMAGE"],[7,14,0,11,0,"OLLAMA_CONNECTIVITY"],[25,15,0,11,1,"OLLAMA_OPTIONS"],[27,11,0,30,0,"STRING"],[28,16,0,11,5,"STRING"],[29,16,1,11,6,"STRING"],[30,16,0,31,0,"STRING"],[31,16,1,32,0,"STRING"]],"groups":[],"config":{},"extra":{"ds":{"scale":0.8140274938684585,"offset":[411.28751040256384,1545.6804242739604]}},"version":0.4}